<aside class="w-64 bg-white border-r border-gray-200 min-h-screen lg:block hidden flex flex-col fixed top-0 left-0 z-40" [class.lg:block]="!isCollapsed()" [class.hidden]="isCollapsed()">
  <div class="p-4 border-b border-gray-200">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold text-gray-900" *ngIf="!isCollapsed()">Components</h2>
      <button 
        class="p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors lg:hidden"
        (click)="toggleCollapse()"
        aria-label="Toggle sidebar">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
  </div>

  <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
           <div class="space-y-1">
             <a routerLink="/" routerLinkActive="active"
                class="flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-colors border-l-2 border-transparent hover:border-blue-200 no-underline hover:no-underline"
                [class.text-blue-600]="true"
                [class.bg-blue-50]="true"
                [class.border-blue-300]="true">
               <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                 <polyline points="9,22 9,12 15,12 15,22"/>
               </svg>
               <span>Home</span>
             </a>

             <a routerLink="/getting-started" routerLinkActive="active"
                class="flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-colors border-l-2 border-transparent hover:border-blue-200 no-underline hover:no-underline">
               <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4"/>
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3c0 1-1 3-3 3s-3-2-3-3 1-3 3-3 3 2 3 3"/>
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21c0-1 1-3 3-3s3 2 3 3-1 3-3 3-3-2-3-3"/>
               </svg>
               <span>Getting Started</span>
             </a>

             <a routerLink="/installation" routerLinkActive="active"
                class="flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 transition-colors border-l-2 border-transparent hover:border-blue-200 no-underline hover:no-underline">
               <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                 <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                 <polyline points="3.27,6.96 12,12.01 20.73,6.96"/>
                 <line x1="12" y1="22.08" x2="12" y2="12"/>
               </svg>
               <span>Installation</span>
             </a>
           </div>

    <div class="mt-6">
      <h3 class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Components</h3>
      
      <div class="space-y-1">
        @for (category of categories(); track category) {
          <div class="space-y-1">
                   <button
                     class="w-full flex items-center justify-between px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors border-l-2 border-transparent hover:border-blue-200"
                     (click)="toggleCategory(category)"
                     [class.bg-blue-50]="isCategoryExpanded(category)"
                     [class.text-blue-600]="isCategoryExpanded(category)"
                     [class.border-blue-300]="isCategoryExpanded(category)">
                     <div class="flex items-center space-x-3">
                       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                         <polyline points="3.27,6.96 12,12.01 20.73,6.96"/>
                         <line x1="12" y1="22.08" x2="12" y2="12"/>
                       </svg>
                       <span>{{ category }}</span>
                       <span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full ml-auto">
                         {{ getComponentsByCategory(category).length }}
                       </span>
                     </div>
                     <svg class="w-4 h-4 transition-transform"
                          [class.rotate-180]="isCategoryExpanded(category)"
                          fill="none" stroke="currentColor" viewBox="0 0 24 24">
                       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                     </svg>
                   </button>
            
                   @if (isCategoryExpanded(category)) {
                     <div class="ml-6 space-y-1">
                       @for (component of getComponentsByCategory(category); track component.id) {
                         <a
                           [routerLink]="['/components', component.id]"
                           routerLinkActive="active"
                           class="flex items-center space-x-3 px-3 py-1.5 text-sm text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors border-l-2 border-transparent hover:border-blue-200 no-underline"
                           [class.text-blue-600]="true"
                           [class.bg-blue-50]="true"
                           [class.border-blue-300]="true">
                           <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                           </svg>
                           <span>{{ component.name }}</span>
                         </a>
                       }
                     </div>
                   }
          </div>
        }
      </div>
    </div>
  </nav>

</aside>
