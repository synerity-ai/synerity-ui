<div [class]="getComponentClass()">
  <!-- Label -->
  <label *ngIf="label" class="sui-password-label" [for]="inputId">{{ label }}</label>
  
  <!-- Password Container -->
  <div [class]="getContainerClass()">
    <!-- Icon -->
    <span *ngIf="icon" class="sui-password-icon">{{ icon }}</span>
    
    <!-- Password Input -->
    <input
      [type]="show ? 'text' : 'password'"
      [id]="inputId"
      [name]="name"
      [disabled]="disabled"
      [readonly]="readonly"
      [placeholder]="placeholder"
      [minLength]="minLength ?? undefined"
      [maxLength]="maxLength ?? undefined"
      [value]="value"
      [attr.aria-label]="getAriaLabel()"
      [attr.aria-describedby]="getAriaDescribedBy()"
      (input)="onInput($event)"
      (blur)="onBlur()"
      (keydown)="onKeyDown($event)"
      [class]="getInputClass()"
    />
    
    <!-- Toggle Button -->
    <button 
      *ngIf="toggleMask"
      type="button" 
      [disabled]="disabled || readonly || loading"
      (click)="toggleVisibility()" 
      [class]="getToggleClass()"
      [attr.aria-label]="getToggleButtonAriaLabel()">
      {{ getToggleButtonText() }}
    </button>
  </div>
  
  <!-- Helper Text -->
  <div *ngIf="helperText && !hasError" [id]="inputId + '-helper'" class="sui-password-helper">
    {{ helperText }}
  </div>
  
  <!-- Error Text -->
  <div *ngIf="errorText || hasError" [id]="inputId + '-error'" class="sui-password-helper sui-password-error-text">
    {{ errorText || 'Invalid password' }}
  </div>
  
  <!-- Password Strength Indicator -->
  <div *ngIf="showStrength && value" [id]="inputId + '-strength'" class="sui-password-strength">
    <div class="sui-password-strength-label">Password Strength</div>
    <div class="sui-password-strength-bar">
      @for (segment of getPasswordStrengthSegments(); track $index) {
        <div 
          class="sui-password-strength-bar-segment"
          [class.sui-password-strength-bar-segment-weak]="segment === 1 && getPasswordStrength() === 'weak'"
          [class.sui-password-strength-bar-segment-medium]="segment === 1 && getPasswordStrength() === 'medium'"
          [class.sui-password-strength-bar-segment-strong]="segment === 1 && getPasswordStrength() === 'strong'">
        </div>
      }
    </div>
    <div 
      class="sui-password-strength-text"
      [class.sui-password-strength-text-weak]="getPasswordStrength() === 'weak'"
      [class.sui-password-strength-text-medium]="getPasswordStrength() === 'medium'"
      [class.sui-password-strength-text-strong]="getPasswordStrength() === 'strong'">
      {{ getPasswordStrengthText() }}
    </div>
  </div>
</div>
