.sui-tag {
  @apply inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full transition-all duration-200;
  animation: tagFadeIn 0.2s ease-out;

  &:hover {
    @apply shadow-sm;
  }

  &:focus-within {
    @apply outline-none ring-2 ring-offset-1;

    &.info {
      @apply ring-blue-500;
    }

    &.success {
      @apply ring-green-500;
    }

    &.warning {
      @apply ring-yellow-500;
    }

    &.danger {
      @apply ring-red-500;
    }

    &.contrast {
      @apply ring-gray-500;
    }
  }

  /* Icon */
  &-icon {
    @apply text-sm;
  }

  /* Value */
  &-value {
    @apply flex-grow;
  }

  /* Remove button */
  &-remove {
    @apply ml-1 w-4 h-4 rounded-full flex items-center justify-center text-xs font-bold hover:bg-black/10 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-1;

    &:disabled {
      @apply opacity-50 cursor-not-allowed;
    }

    &:focus {
      @apply ring-2 ring-offset-1;

      &.info {
        @apply ring-blue-500;
      }

      &.success {
        @apply ring-green-500;
      }

      &.warning {
        @apply ring-yellow-500;
      }

      &.danger {
        @apply ring-red-500;
      }

      &.contrast {
        @apply ring-gray-500;
      }
    }
  }

  /* Severity variants */
  &-info {
    @apply bg-blue-100 text-blue-800 border border-blue-200;
  }

  &-success {
    @apply bg-green-100 text-green-800 border border-green-200;
  }

  &-warning {
    @apply bg-yellow-100 text-yellow-800 border border-yellow-200;
  }

  &-danger {
    @apply bg-red-100 text-red-800 border border-red-200;
  }

  &-contrast {
    @apply bg-gray-100 text-gray-800 border border-gray-200;
  }

  /* Size variants */
  &.small {
    @apply px-2 py-0.5 text-xs;
  }

  &.large {
    @apply px-4 py-2 text-base;
  }

  /* Shape variants */
  &.rounded {
    @apply rounded-md;
  }

  &.square {
    @apply rounded-none;
  }

  /* Interactive states */
  &.removable {
    @apply cursor-pointer;

    &:hover {
      @apply transform scale-105 shadow-md;

      .sui-tag-remove {
        @apply bg-black/20;
      }
    }

    .sui-tag-value {
      @apply mr-1;

      &.has-icon {
        @apply mr-1;
      }
    }
  }

  &.disabled {
    @apply opacity-50 cursor-not-allowed;
  }

  /* Icon positioning */
  &.has-icon .sui-tag-value {
    @apply ml-1;

    &.small {
      @apply ml-0.5;
    }

    &.large {
      @apply ml-1.5;
    }
  }

  /* Loading state */
  &.loading {
    @apply animate-pulse;
  }

  /* Pulse animation for attention */
  &.pulse {
    animation: tagPulse 2s infinite;
  }

  /* Custom styling variants */
  &.outlined {
    @apply bg-transparent border-2;

    &.info {
      @apply text-blue-600 border-blue-300;
    }

    &.success {
      @apply text-green-600 border-green-300;
    }

    &.warning {
      @apply text-yellow-600 border-yellow-300;
    }

    &.danger {
      @apply text-red-600 border-red-300;
    }

    &.contrast {
      @apply text-gray-600 border-gray-300;
    }
  }

  &.filled {
    @apply text-white border-0;

    &.info {
      @apply bg-blue-600;
    }

    &.success {
      @apply bg-green-600;
    }

    &.warning {
      @apply bg-yellow-600;
    }

    &.danger {
      @apply bg-red-600;
    }

    &.contrast {
      @apply bg-gray-600;
    }
  }

  /* Gradient variants */
  &.gradient {
    @apply border-0 text-white;

    &.info {
      @apply bg-gradient-to-r from-blue-500 to-blue-600;
    }

    &.success {
      @apply bg-gradient-to-r from-green-500 to-green-600;
    }

    &.warning {
      @apply bg-gradient-to-r from-yellow-500 to-yellow-600;
    }

    &.danger {
      @apply bg-gradient-to-r from-red-500 to-red-600;
    }

    &.contrast {
      @apply bg-gradient-to-r from-gray-500 to-gray-600;
    }
  }
}

/* Animation keyframes */
@keyframes tagFadeIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes tagPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .sui-tag {
    &-info {
      @apply bg-blue-900/30 text-blue-300 border-blue-700;
    }

    &-success {
      @apply bg-green-900/30 text-green-300 border-green-700;
    }

    &-warning {
      @apply bg-yellow-900/30 text-yellow-300 border-yellow-700;
    }

    &-danger {
      @apply bg-red-900/30 text-red-300 border-red-700;
    }

    &-contrast {
      @apply bg-gray-800 text-gray-300 border-gray-600;
    }

    &-remove {
      @apply hover:bg-white/10;
    }
  }
}

/* Responsive adjustments */
@media (max-width: 640px) {
  .sui-tag {
    @apply text-xs px-2 py-0.5;

    &.large {
      @apply px-3 py-1.5 text-sm;
    }

    &-remove {
      @apply w-3 h-3 text-xs;
    }
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .sui-tag {
    @apply border-2;

    &-info {
      @apply border-blue-800;
    }

    &-success {
      @apply border-green-800;
    }

    &-warning {
      @apply border-yellow-800;
    }

    &-danger {
      @apply border-red-800;
    }

    &-contrast {
      @apply border-gray-800;
    }
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .sui-tag {
    animation: none;
    transition: none;

    &-remove {
      transition: none;
    }

    &.pulse {
      animation: none;
    }
  }
}
